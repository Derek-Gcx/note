# 链接与加载

+ 编译器对c文件中声明的外部变量和函数不作真实类型检查。
+ 在编译遇到外部符号时，外部符号留空处理
+ 一组区别
  + 静态链接时，引用的代码会被一起编译到文件中，此时使用pmap查看可以发现映射的地址空间均为a.out文件
  + 动态连接时，mmap会将一部分空间映射到动态链接库.so。整个系统中只会有这一个副本

+ 实现动态加载
  + 首先要写出位置无关代码（PIC）
    + 事实上x86使用PC相对位置寻址，天生就是位置无关的
  + 在一段程序中open想要加载的代码，使用mmap进行映射，获取指针ptr
  + 用ptr去call这段代码即可